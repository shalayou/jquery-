<!DOCTYPE html>
<html lang="en">
<head>
    <title>Pagination 分页表格</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link href="./demo/demo.css" rel="stylesheet" type="text/css" />

    <script src="./scripts/boot.js" type="text/javascript"></script>
    <script src="./demo/datagrid/js/ColumnsMenu.js" type="text/javascript"></script>
    
</head>
<body >
    <h1>Pagination 分页表格</h1>      

    <div style="padding-bottom:5px;">
        
        <span>员工姓名：</span><input type="text" id="key"  />
        <input type="button" value="查找" onclick="search()"/>
        
    </div>

<div id="datagrid1" class="mini-datagrid" style="width:100%;" 
    url="./demo/data/AjaxService.json"
    idField="id" allowResize="true"
    sizeList="[20,30,50,100]" pageSize="20" 
    showHeader="true" title="表格面板"
    ondrawcell="draw"
 onmouseup="return datagrid1_onmouseup()">
    <div property="columns">
        <div type="indexcolumn" ></div>
        <div field="loginname" width="120" headerAlign="center" allowSort="true">员工帐号</div>    
        <div field="name" width="120" headerAlign="center" allowSort="true">姓名</div>                            
        <div field="gender" width="100" renderer="onGenderRenderer" align="center" headerAlign="center">性别</div>
        <div field="salary" numberFormat="¥#,0.00" align="right" width="100" allowSort="true">薪资</div>                                
        <div field="age" width="100" allowSort="true" decimalPlaces="2" dataType="float">年龄</div>
        <div field="createtime" width="100" headerAlign="center" dateFormat="yyyy-MM-dd" allowSort="true">创建日期</div> 
        <div name="Operate" width="135" headeralign="center" allowsort="true"  headerStyle="background-color:#e4edf2">操作</div>               
    </div>
</div>
    <script type="text/javascript">
    	var H = parseInt($(window).height())-96;
    	$("#datagrid1").css("height",H+"px");
          //初始化操作列按钮
		function draw(e) {
    		var record = e.record;
   	 		var column = e.column;
    		if (column.name == "Operate") {
        		// e.cellHtml = '<a class="mini-button" href="javascript:edit(0)" ><span class="mini-button-text  mini-button-icon icon-edit" style="" >   查看   </span></a><a class="mini-button" href="javascript:edit(1)"><span class="mini-button-text  mini-button-icon icon-edit" style="">   编辑   </span></a>'
        		e.cellHtml = '<a id="search" class="mini-button" iconCls="icon-reload" onclick="searchCheckList()">查看检修单</a><a id="Relation" class="mini-button" iconCls="icon-reload" onclick="relateCheckList()">关联检修单</a>'
    		}
		}

        mini.parse();
        
        var grid = mini.get("datagrid1");

        grid.load();

        var menu = new ColumnsMenu(grid);

        function search() {
            var key = document.getElementById("key").value;
            grid.load({ key: key});
        }
        $("#key").bind("keydown", function (e) {
            if (e.keyCode == 13) {
                search();
            }
        });
        ///////////////////////////////////////////////////////
        var Genders = [{ id: 1, text: '男' }, { id: 2, text: '女'}];
        function onGenderRenderer(e) {
            for (var i = 0, l = Genders.length; i < l; i++) {
                var g = Genders[i];
                if (g.id == e.value) return g.text;
            }
            return "";
        }
        function datagrid1_onmouseup() {

        }

    </script>

    <div class="description" style="display:none;">
        <h3>Description</h3>
        
    </div>


  

</body>
</html>